{% extends "layout.html" %}

{% block main %}
<section class="container mt-2">
    <div class="mx-auto mb-3" style="text-align: center; font-weight: bold; font-size: 24px;">Ejercicio 2</div>

    <div class="mx-auto">
        <!-- Gráfica para usuarios -->
        <canvas id="usuariosChart"></canvas>
    </div>

    <div class="mx-auto">
        <!-- Gráfica para administradores -->
        <canvas id="adminChart"></canvas>
    </div>

    <div class="mx-auto">
        <!-- Gráfica para contraseñas débiles -->
        <canvas id="debilChart"></canvas>
    </div>

    <div class="mx-auto">
        <!-- Gráfica para contraseñas fuertes -->
        <canvas id="fuerteChart"></canvas>
    </div>
</section>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    // Datos recibidos desde app.py
    var data = {{ data|safe }};

    // Gráfica para usuarios
    var usuariosChartCtx = document.getElementById('usuariosChart').getContext('2d');
    new Chart(usuariosChartCtx, {
        type: 'bar',
        data: {
            datasets: [{
                label: 'Usuarios',
                data: data.usuarios,
                backgroundColor: 'rgba(255, 99, 132, 0.2)',
                borderColor: 'rgba(255, 99, 132, 1)',
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });

    // Gráfica para administradores
    var adminChartCtx = document.getElementById('adminChart').getContext('2d');
    new Chart(adminChartCtx, {
        type: 'bar',
        data: {
            datasets: [{
                label: 'Administradores',
                data: data.admin,
                backgroundColor: 'rgba(54, 162, 235, 0.2)',
                borderColor: 'rgba(54, 162, 235, 1)',
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });

    // Gráfica para contraseñas débiles
    var debilChartCtx = document.getElementById('debilChart').getContext('2d');
    new Chart(debilChartCtx, {
        type: 'bar',
        data: {
            datasets: [{
                label: 'Contraseñas Débiles',
                data: data.debil,
                backgroundColor: 'rgba(255, 206, 86, 0.2)',
                borderColor: 'rgba(255, 206, 86, 1)',
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });

    // Gráfica para contraseñas fuertes
    var fuerteChartCtx = document.getElementById('fuerteChart').getContext('2d');
    new Chart(fuerteChartCtx, {
        type: 'bar',
        data: {
            datasets: [{
                label: 'Contraseñas Fuertes',
                data: data.fuerte,
                backgroundColor: 'rgba(75, 192, 192, 0.2)',
                borderColor: 'rgba(75, 192, 192, 1)',
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
</script>
{% endblock %}

